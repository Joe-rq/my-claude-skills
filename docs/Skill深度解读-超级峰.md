# Claude Code Skill 深度解读

> 整理自「AI 编程互助会 07 群」超级峰的分享（2026-01-28），原始聊天记录见 [超级峰群聊讨论.md](超级峰群聊讨论.md)，官方文档：[skills](https://code.claude.com/docs/en/skills)

## 核心论点

**Skill 不是"工作流模板"，而是底层原子能力的封装单元。**

90% 的自媒体把 Skill 窄化为"文件夹 + 模板 + 脚本调用"，忽略了它的配置体系。官方的意图是把 Skill 做成最小执行单元——类似代码中的函数被抽象上提一层，可以装任何东西、与其他原子能力（Subagent、Hook）任意嵌套组合。

---

## 被忽视的四个维度

### 1. 调用控制：谁触发、何时触发

Skill 的调用权限不是非此即彼，而是三档可配：

| 配置 | 效果 | 适用场景 |
|:--|:--|:--|
| 默认 | 用户 `/name` 可调 + AI 自动识别调用 | 通用技能 |
| `disable-model-invocation: true` | 仅用户手动触发，AI 无法自动调用 | 部署、发消息等有副作用的操作 |
| `user-invocable: false` | 仅 AI 自动调用，用户看不到 | 背景知识、上下文概念 |

关键洞察：`user-invocable: false` 这档很少被讨论，但它让 Skill 可以充当**按需加载的上下文知识**——不占系统提示词空间，AI 在相关时自动拉取。

### 2. Skill ↔ Agent 双向嵌套

两种方向，解决不同问题：

**Skill 调用 Agent（`context: fork`）**
- Skill 定义任务，Agent 提供执行环境
- 上下文隔离，不污染主对话
- 例：Skill 写"调研 X 技术"，配 `agent: Explore`，锁定为只读调研模式

**Agent 配置 Skill（Subagent 的 `skills` 字段）**
- Agent 定义角色，Skill 作为它的"技能包"
- 类比：给员工配技能，限定它只能查询/编辑/执行特定操作
- 两种方向可以嵌套使用

### 3. Hook 联动：事件驱动触发 Skill

Skill 支持与 Hook 配置联动，实现事件驱动的自动化：

- 绑定编辑文件事件 → 自动运行某个 Skill（如代码规范检查）
- 把原先写在系统提示词/项目提示词里的规范移入 Skill

**好处**：
- 上下文窗口占用更少（按需加载 vs 常驻提示词）
- 可维护性更高（独立文件 vs 散落在 CLAUDE.md 里）
- 可标准化分享给他人

> **注意**：当前官方实现中，Skill frontmatter 的 `hooks` 字段作用于 Skill 自身的生命周期（激活/结束时触发），并非任意事件都能触发任意 Skill。超级峰描述的"编辑文件时自动触发 Skill"场景，比当前官方实现超前了一步。

### 4. 模板化变量传入

两层能力：

**基础：`$ARGUMENTS` 占位符**
- `/review-code my-project` → `$ARGUMENTS` 替换为 `my-project`
- 同一个 Skill 审查不同项目，只需换参数

**进阶：`` !`command` `` 动态注入**
- Skill 内预配终端指令，运行结果拼入提示词
- Claude 只看到最终数据，不看到命令本身
- 例：`` !`gh pr diff` `` 的输出直接注入，Claude 拿到的是实际 diff

---

## 关键认知转变

### Skill 是"模式"，不只是"工作流"

> 你可以把它配成模式，比如原先官方有的 plan 模式、深度检查模式，全部都可以用 Skill 配置来单独搭建。

工作流是线性的（步骤 1→2→3），模式是可组合的（调用控制 x Agent 嵌套 x Hook 联动 x 变量传入）。配置的排列组合产生新模式，而非新流程。

### Skill 是 AI 工程化的分水岭

- **初级 vibe coding**：把 AI 当工具，逐次对话完成任务
- **AI 工程师**：掌握原子能力（Skill + Subagent + Hook），搭建可复用的工程解决方案

这不是焦虑制造，而是工程化的自然演进。

### 未来形态推演

> 未来的产品可能就是 Agent + 很多 Skill，达到自然语言对话获得服务的形式。

Skill = 最小执行单元，所有功能函数都变成可被 AI 自动识别、调用、输出结果的过程。本质上是把代码函数往上抽了一层，用自然语言描述替代函数签名。

---

## 实践建议

1. **先读官方文档原文**，比自媒体二手信息密度高得多
2. **不必手写 Skill**，知道有哪些配置和场景，让 AI 帮你写
3. **从自身需求出发**，不是所有配置都要用上，挑对自己最有用的组合
4. **Claude 的工程化文档远超 Cursor**，偏工程类应用优先看 Claude
